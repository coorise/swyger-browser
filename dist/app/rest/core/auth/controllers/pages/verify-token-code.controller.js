var g=(d,a,o)=>new Promise((r,s)=>{var c=i=>{try{l(o.next(i))}catch(m){s(m)}},n=i=>{try{l(o.throw(i))}catch(m){s(m)}},l=i=>i.done?r(i.value):Promise.resolve(i.value).then(c,n);l((o=o.apply(d,a)).next())});import{ErrorCodeValidation as h,CodeValidation as k}from"../../validations/code.validation.js";const w=d=>g(void 0,null,function*(){var l,i;const{req:a,controller:o}=d;a.$router;const r=o.client;let s={title:"Login Verify Code | Agglomy !",meta:[{name:"child value",content:"child content value"}]};const c={index:"pages/verify-code.html"};let n={message:((l=a.query)==null?void 0:l.message)||"",page:"",user:{email:(i=a.query)==null?void 0:i.email,code:""},error:h,clientError:"",verifyCode(){return g(this,null,function*(){var f,v;try{if(k(this.user,this.error)==="ok"){ENV==="dev"&&console.log("All Fields are completed");let C={email:this.user.email,tokenCode:this.user.code},t=yield r==null?void 0:r.auth().verifyTokenCode(C).val();if(t!=null&&t.error){let e=(f=t==null?void 0:t.error)==null?void 0:f.auth;switch(e==null?void 0:e.code){case 600:this.clientError=(e==null?void 0:e.message)||"This User does not exit!";break;case 605:this.clientError=(e==null?void 0:e.message)||"Code is Invalid!";break;case 606:this.clientError=(e==null?void 0:e.message)||"Code Is Expired!";break}}else(v=t==null?void 0:t.data)!=null&&v.data&&(this.clientError="",a.go())}}catch(y){ENV==="dev"&&console.log(y)}})}};yield o.render({data:n,meta:s,views:c})});export{w as default};
//# sourceMappingURL=verify-token-code.controller.js.map
