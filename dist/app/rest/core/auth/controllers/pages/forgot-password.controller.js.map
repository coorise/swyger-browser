{"version":3,"file":"forgot-password.controller.js","sources":["../../../../../../../src/app/rest/core/auth/controllers/pages/forgot-password.controller.js"],"sourcesContent":["const ForgotPasswordController = async (args) =>{\r\n  const {req,controller}=args;\r\n  //req.io.auth.socket.privateClient=true\r\n  //controller.client.io=req.io\r\n  //console.log('path : ', req.path)\r\n  //console.log('query : ', req.query)\r\n  //console.log('param : ', req.param)\r\n  const router=req.$router\r\n  //router.go('/')\r\n  //router.back('path')\r\n  //router.mount('path',function)\r\n  //router.off('path')\r\n  //router.reload()\r\n  const client=controller.client\r\n\r\n  let meta={\r\n    title: 'Forgot Password | Aminuty',\r\n    meta: [\r\n      {\r\n        name: \"child value\",\r\n        content: \"child content value\"\r\n      },\r\n    ]\r\n    // name:\"Name\"\r\n  }\r\n\r\n  const views={\r\n    // that is a way to import your template\r\n    // the let is the name and right side is the path\r\n    //so on your parent template, use  eg: <index/>\r\n    index:'pages/forgot-password.html',\r\n  }\r\n  let data= {\r\n\r\n      res:'',\r\n\r\n      error:{\r\n          email:'',\r\n      },\r\n      forgotPassword(){\r\n          //e.preventDefault(); // Otherwise the form will be submitted\r\n\r\n          if(!this.user.email){\r\n              console.log('email is empty');\r\n              this.error.email= '(email is empty)';\r\n          }else{\r\n              this.error.email= '';\r\n          }\r\n          if(!this.user.email.match(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/)){\r\n              console.log('give us a valid email address');\r\n              this.error.email= '(Please give us valid email address)';\r\n          }else{\r\n              this.error.email= '';\r\n          }\r\n\r\n\r\n          if(this.user.email.match(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/)\r\n          ){\r\n              console.log('All Fields are completed');\r\n              let mUser ={\r\n                  email:this.user.email\r\n              }\r\n              this.res=client?.auth?.auth()?.sendResetPasswordEmail(mUser).val()\r\n\r\n              if(this.res.code === 404){\r\n                  console.log('Error Code From AuthController')\r\n                  console.log(this.res.code)\r\n                  console.log('Error Message From AuthController')\r\n                  console.log(this.res.message)\r\n                  this.error.email= '(No users found with this email)';\r\n              }else {\r\n                  console.log('The response sendForgot Pass from Auth: ')\r\n                  console.log(this.res.res)\r\n                  let email=this.res.res.user.email\r\n                  localStorage.setItem('email',email);\r\n                  //Route('auth','reset-password')\r\n              }\r\n\r\n          }\r\n      },\r\n  }\r\n  await controller.render({data, meta,views})\r\n}\r\nexport default ForgotPasswordController\r\n"],"names":["ForgotPasswordController","args","__async","req","controller","client","meta","views","data","_a","_b","mUser","email"],"mappings":"6MAAK,MAACA,EAAkCC,GAAQC,EAAA,wBAC9C,KAAM,CAAC,IAAAC,EAAI,WAAAC,CAAU,EAAEH,EAMVE,EAAI,QAMjB,MAAME,EAAOD,EAAW,OAExB,IAAIE,EAAK,CACP,MAAO,4BACP,KAAM,CACJ,CACE,KAAM,cACN,QAAS,qBACV,CACF,CAEF,EAED,MAAMC,EAAM,CAIV,MAAM,4BACP,EACD,IAAIC,EAAM,CAEN,IAAI,GAEJ,MAAM,CACF,MAAM,EACT,EACD,gBAAgB,CAvCjB,IAAAC,EAAAC,EAwDK,GAdI,KAAK,KAAK,MAIV,KAAK,MAAM,MAAO,IAHlB,QAAQ,IAAI,gBAAgB,EAC5B,KAAK,MAAM,MAAO,oBAIlB,KAAK,KAAK,MAAM,MAAM,sEAAsE,EAI5F,KAAK,MAAM,MAAO,IAHlB,QAAQ,IAAI,+BAA+B,EAC3C,KAAK,MAAM,MAAO,wCAMnB,KAAK,KAAK,MAAM,MAAM,sEAAsE,EAC9F,CACG,QAAQ,IAAI,0BAA0B,EACtC,IAAIC,EAAO,CACP,MAAM,KAAK,KAAK,KACnB,EAGD,GAFA,KAAK,KAAID,GAAAD,EAAAJ,GAAA,YAAAA,EAAQ,OAAR,YAAAI,EAAc,SAAd,YAAAC,EAAsB,uBAAuBC,GAAO,MAE1D,KAAK,IAAI,OAAS,IACjB,QAAQ,IAAI,gCAAgC,EAC5C,QAAQ,IAAI,KAAK,IAAI,IAAI,EACzB,QAAQ,IAAI,mCAAmC,EAC/C,QAAQ,IAAI,KAAK,IAAI,OAAO,EAC5B,KAAK,MAAM,MAAO,uCAChB,CACF,QAAQ,IAAI,0CAA0C,EACtD,QAAQ,IAAI,KAAK,IAAI,GAAG,EACxB,IAAIC,EAAM,KAAK,IAAI,IAAI,KAAK,MAC5B,aAAa,QAAQ,QAAQA,CAAK,CAErC,CAEJ,CACJ,CACJ,EACD,MAAMR,EAAW,OAAO,CAAC,KAAAI,EAAM,KAAAF,EAAK,MAAAC,CAAK,CAAC,CAC5C"}