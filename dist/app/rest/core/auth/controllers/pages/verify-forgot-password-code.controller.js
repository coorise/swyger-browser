var f=(d,a,o)=>new Promise((l,r)=>{var c=i=>{try{s(o.next(i))}catch(m){r(m)}},n=i=>{try{s(o.throw(i))}catch(m){r(m)}},s=i=>i.done?l(i.value):Promise.resolve(i.value).then(c,n);s((o=o.apply(d,a)).next())});import{ErrorCodeValidation as C,CodeValidation as w}from"../../validations/code.validation.js";const u=d=>f(void 0,null,function*(){var s,i;const{req:a,controller:o}=d;a.$router;const l=o.client;let r={title:"Forgot Password Verify Code | Agglomy !",meta:[{name:"child value",content:"child content value"}]};const c={index:"pages/verify-code.html"};let n={message:((s=a.query)==null?void 0:s.message)||"",user:{email:(i=a.query)==null?void 0:i.email,code:""},error:C,clientError:"",verifyCode(){return f(this,null,function*(){var g,v;try{if(w(this.user,this.error)==="ok"){ENV==="dev"&&console.log("All Fields are completed");let h={email:this.user.email,passwordCode:this.user.code},t=yield l==null?void 0:l.auth().verifyPassCode(h).val();if(t!=null&&t.error){let e=(g=t==null?void 0:t.error)==null?void 0:g.auth;switch(e==null?void 0:e.code){case 600:this.clientError=(e==null?void 0:e.message)||"This User does not exit!";break;case 605:this.clientError=(e==null?void 0:e.message)||"Code is Invalid!";break;case 606:this.clientError=(e==null?void 0:e.message)||"Code Is Expired!";break}}else(v=t==null?void 0:t.data)!=null&&v.data&&(this.clientError="",a.go())}}catch(y){ENV==="dev"&&console.log(y)}})},refreshToken(){}};yield o.render({data:n,meta:r,views:c})});export{u as default};
//# sourceMappingURL=verify-forgot-password-code.controller.js.map
