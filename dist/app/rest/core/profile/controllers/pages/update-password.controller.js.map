{"version":3,"file":"update-password.controller.js","sources":["../../../../../../../src/app/rest/core/profile/controllers/pages/update-password.controller.js"],"sourcesContent":["const UpdatePasswordController = (userModel, authService) => {\r\n    return {\r\n        title: 'Reset Password | Aminuty',\r\n        user: userModel,\r\n        email:(localStorage.getItem('email'))?localStorage.getItem('email'):'',\r\n        auth: authService,\r\n        res:'',\r\n        token:'',\r\n\r\n        error:{\r\n            token:'',\r\n            password:'',\r\n            password_length:'',\r\n            password_digit:'',\r\n            password_specialChar:'',\r\n        },\r\n        resetPassword(){\r\n            //e.preventDefault(); // Otherwise the form will be submitted\r\n\r\n            if(!this.token){\r\n                console.log('username is empty');\r\n                this.error.token= '(code is empty)';\r\n            } else{\r\n                this.error.token= '';\r\n            }\r\n\r\n            if(this.user.password.length<8){\r\n                console.log('password is too short');\r\n                this.error.password_length= '(password is too short min <= 8 )';\r\n            }else{\r\n                this.error.password_length= '';\r\n            }\r\n\r\n            if(this.user.password.search(/[0-9]/) < 0){\r\n                console.log('password must contain 1 digit');\r\n                this.error.password_digit= '(password must contain at least 1 digit [0-9])';\r\n            }else{\r\n                this.error.password_digit= '';\r\n            }\r\n            if(this.user.password.search(/[!@#$%^&*]/) < 0){\r\n                console.log('password must contain 1 special character');\r\n                this.error.password_specialChar= '(password must contain at least 1 special character [!@#$%^&*])';\r\n            }else{\r\n                this.error.password_specialChar= '';\r\n            }\r\n\r\n\r\n            if(this.token\r\n                &&this.user.password\r\n                && this.user.password.length>=8\r\n                && (this.user.password.search(/[0-9]/) >0\r\n                    && this.user.password.search(/[!@#$%^&*]/) > 0)\r\n            ){\r\n                console.log('All Fields are completed');\r\n                var mUser ={\r\n                    token:this.token,\r\n                    password:this.user.password\r\n                }\r\n                this.res=this.auth.resetPassword(mUser)\r\n\r\n                if(this.res.code === 401){\r\n                    console.log('Error Code From AuthController')\r\n                    console.log(this.res.code)\r\n                    console.log('Error Message From AuthController')\r\n                    console.log(this.res.message)\r\n                    this.error.token= '(Password Reset Failed , token expired. Go to forgot page)';\r\n                }else {\r\n                    console.log('The response is refresh token from Auth: ')\r\n                    console.log(this.res)\r\n                    //Route('auth','login')\r\n                }\r\n\r\n            }\r\n        },\r\n    }\r\n}\r\nexport default UpdatePasswordController\r\n"],"names":["UpdatePasswordController","userModel","authService","mUser"],"mappings":"AAAK,MAACA,EAA2B,CAACC,EAAWC,KAClC,CACH,MAAO,2BACP,KAAMD,EACN,MAAO,aAAa,QAAQ,OAAO,EAAG,aAAa,QAAQ,OAAO,EAAE,GACpE,KAAMC,EACN,IAAI,GACJ,MAAM,GAEN,MAAM,CACF,MAAM,GACN,SAAS,GACT,gBAAgB,GAChB,eAAe,GACf,qBAAqB,EACxB,EACD,eAAe,CA+BX,GA5BI,KAAK,MAIL,KAAK,MAAM,MAAO,IAHlB,QAAQ,IAAI,mBAAmB,EAC/B,KAAK,MAAM,MAAO,mBAKnB,KAAK,KAAK,SAAS,OAAO,GACzB,QAAQ,IAAI,uBAAuB,EACnC,KAAK,MAAM,gBAAiB,qCAE5B,KAAK,MAAM,gBAAiB,GAG7B,KAAK,KAAK,SAAS,OAAO,OAAO,EAAI,GACpC,QAAQ,IAAI,+BAA+B,EAC3C,KAAK,MAAM,eAAgB,kDAE3B,KAAK,MAAM,eAAgB,GAE5B,KAAK,KAAK,SAAS,OAAO,YAAY,EAAI,GACzC,QAAQ,IAAI,2CAA2C,EACvD,KAAK,MAAM,qBAAsB,mEAEjC,KAAK,MAAM,qBAAsB,GAIlC,KAAK,OACF,KAAK,KAAK,UACT,KAAK,KAAK,SAAS,QAAQ,GAC1B,KAAK,KAAK,SAAS,OAAO,OAAO,EAAG,GACjC,KAAK,KAAK,SAAS,OAAO,YAAY,EAAI,EACpD,CACG,QAAQ,IAAI,0BAA0B,EACtC,IAAIC,EAAO,CACP,MAAM,KAAK,MACX,SAAS,KAAK,KAAK,QACtB,EACD,KAAK,IAAI,KAAK,KAAK,cAAcA,CAAK,EAEnC,KAAK,IAAI,OAAS,KACjB,QAAQ,IAAI,gCAAgC,EAC5C,QAAQ,IAAI,KAAK,IAAI,IAAI,EACzB,QAAQ,IAAI,mCAAmC,EAC/C,QAAQ,IAAI,KAAK,IAAI,OAAO,EAC5B,KAAK,MAAM,MAAO,+DAElB,QAAQ,IAAI,2CAA2C,EACvD,QAAQ,IAAI,KAAK,GAAG,EAI3B,CACJ,CACJ"}